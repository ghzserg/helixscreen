// SPDX-License-Identifier: GPL-3.0-or-later
//
// Filesystem compatibility shim for GCC 7.5 (K1 dynamic toolchain).
// GCC 7 only provides <experimental/filesystem>; GCC 8+ has <filesystem>.
// This header is placed on the include path via -isystem include/compat so that
// #include <filesystem> transparently picks it up on older compilers.

#pragma once

#if defined(__GNUC__) && __GNUC__ < 8

#include <experimental/filesystem>

// Alias experimental::filesystem into std::filesystem so existing code compiles
// unmodified. Adding to namespace std is technically UB but is the standard
// migration pattern for GCC 7→8 and works reliably in practice.
namespace std {
namespace filesystem = experimental::filesystem;
}

#else

// GCC 8+ / Clang / MSVC — use the real header
#include_next <filesystem>

#endif
